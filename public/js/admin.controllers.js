!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/",o(o.s=6)}({6:function(t,e,o){t.exports=o("y6PQ")},y6PQ:function(t,e){var o=angular.module("adminController",["angularApp"]);o.run((function(t){t.changeLocale("es")})),o.controller("adminCtrl",["$scope","AdminFactory","$http","$window","Upload",function(t,e,o,n,a){e.allUsers().then((function(e){t.usuarios=e.data}),(function(t){console.log(t)})),e.ganadores().then((function(e){t.ganadores=e.data}),(function(t){console.log(t)})),e.oneUser().then((function(e){t.usuario=e.data}),(function(t){console.log(t)})),e.tickets().then((function(e){t.tickets=e.data}),(function(t){console.log(t)})),e.ticketsUsuarios().then((function(e){t.ticketsUsuarios=e.data}),(function(t){console.log(t)})),e.establecimientos().then((function(e){t.establecimientos=e.data}),(function(t){console.log(t)})),t.addTicket=function(e){var o=e.monto.match(/\d+/g).map(Number);for(e.monto="",i=0;i<o.length;i++)e.monto=e.monto+o[i];Swal.fire({title:"Espera...",text:"Estamos enviando tu ticket.",imageUrl:"/img/icons/Spinner-1s-200px.gif",showConfirmButton:!1}),a.upload({url:"/adminTicket",data:e}).then((function(e){Swal.fire({title:"¡Todo bien!",text:"Tu ticket se ha registrado con éxito",confirmButtonText:"Aceptar"}).then((function(t){location.reload()})),t.ticket={},$(".img-default-ticket").attr("src","/img/icons/camera-blue.svg")}),(function(t){Swal.fire({type:"error",title:"Oh no! Algo salió mal.",text:t.data.error.no_ticket})}))};$("#nuevoticket").change((function(){!function(t){if(t.files&&t.files[0]){var e=new FileReader;e.onload=function(t){$(".img-default-ticket").attr("src",t.target.result)},e.readAsDataURL(t.files[0])}}(this)})),t.checkPosibleGanador=function(t){Swal.fire({title:"Espera...",text:"Estamos enviado la información al posible ganador.",imageUrl:"/img/icons/Spinner-1s-200px.gif",showConfirmButton:!1}),console.log(t),$("#modalPosibleGanador").modal("hide"),e.setPosibleGanadorGanador(t).then((function(t){Swal.fire({type:"success",title:"¡Listo!",text:"El correo ha sido enviado con éxito."}),location.reload()}),(function(t){Swal.fire({type:"error",title:"¡Oh no!",text:t.data}),console.log(t)}))},t.addGanador=function(t){console.log(t),Swal.fire({title:"Espera...",text:"Estamos agregando los datos del ganador.",imageUrl:"/img/icons/Spinner-1s-200px.gif",showConfirmButton:!1}),e.setGanador(t).then((function(t){Swal.fire({type:"success",title:"¡Listo!",text:"El usuario ganador ha sido agregado con éxito."}).then((function(t){n.location.href="/admin/usuarios/ganadores"})),console.log(t.data)}),(function(t){Swal.fire({type:"error",title:"¡Oh no!",text:t.data}),console.log(t)}))},t.getCP=function(e){o.get("/api/v1/cp/"+e).then((function(e){t.errorCP=null,t.user.estado=e.data.Estado,t.user.municipio=e.data.Municipio,t.user.coloniaArray=e.data.Colonia.split(";"),console.log(t.user,"ADMIN CP")}),(function(e){t.errorCP=e.data.error,console.log(t.errorCP)}))},t.register=function(t){console.log(t),Swal.fire({title:"Espera...",text:"Estamos verificando tus datos.",imageUrl:"/img/icons/Spinner-1s-200px.gif",showConfirmButton:!1}),e.register(t).then(r,l)};var r=function(t){n.location.href="/admin/usuarios/registrados"},l=function(e){t.errors=e.data.fail,Swal.close(),console.log(e.data.fail)};t.delete=function(o){console.log(t.tickets),Swal.fire({title:"¿Seguro que quieres eliminar el monto?",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Si, eliminar",cancelButtonText:"No, Cancelar"}).then((function(t){t.value&&e.deleteTicket(o).then((function(t){Swal.fire({title:"Todo bien",text:t.data.message,type:"success"}),location.reload()}),(function(t){Swal.fire({title:"Algo salió mal",text:t.data.message,type:"error"})}))}))},e.dashboard().then((function(e){t.dashboard_data=e.data,t.date=new Date}),(function(t){console.log(t)})),t.editMonto=function(t){console.log(t),$(".modalEdit").modal("hide"),Swal.fire({title:"¿Seguro que quieres modificar el monto?",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Si, modificar",cancelButtonText:"No, cancelar"}).then((function(o){o.value&&e.editTicket(t).then((function(t){Swal.fire({title:"Todo bien",text:t.data.message,type:"success"}),location.reload()}),(function(t){Swal.fire({title:"Algo salió mal",text:t.data.message,type:"error"})}))}))},t.editFecha=function(t){console.log(t),$(".modalEditDate").modal("hide"),Swal.fire({title:"¿Seguro que quieres modificar la fecha?",type:"warning",showCancelButton:!0,confirmButtonColor:"#d33",confirmButtonText:"Si, modificar",cancelButtonText:"No, cancelar"}).then((function(o){Swal.fire({title:"Espera...",text:"Estamos modifcando tus datos.",imageUrl:"/img/icons/Spinner-1s-200px.gif",showConfirmButton:!1}),o.value&&e.editTicketDate(t).then((function(t){Swal.fire({title:"Todo bien",text:t.data.message,type:"success"}),location.reload()}),(function(t){Swal.fire({title:"Algo salió mal",text:t.data.message,type:"error"})}))}))}}]),o.directive("money",["$filter","$locale",function(t,e){return{restrict:"A",require:"ngModel",link:function(o,n,i,a){function r(){var o=a.$modelValue,n=e.NUMBER_FORMATS.GROUP_SEP,i=new RegExp(n,"g");o=String(o).replace(i,"");o=t("currency")(o,"");var r=e.NUMBER_FORMATS.DECIMAL_SEP;o=o.split(r)[0],a.$viewValue=o,a.$render()}r(),o.$watch(i.ngModel,(function(){r()}))}}}])}});